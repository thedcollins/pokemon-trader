<%- include('partials/header'); %> <%# Include the header partial %>

<%# --- Page Specific Content Starts Here --- %>

<h1><%= typeof title !== 'undefined' ? title : 'Browse Cards' %></h1>

<% if (typeof cards !== 'undefined' && cards.length > 0) { %>
    <div class="card-grid">
        <% cards.forEach(card => { %>
            <div class="card-item">
                <div> <% if (card.image_url) { %>
                        <img src="<%= card.image_url %>" alt="<%= card.card_name %>">
                    <% } else { %>
                        <p>(No Image)</p>
                    <% } %>
                    <p><strong><%= card.card_name %></strong></p>
                    <p><%= card.set_name %> - <%= card.card_number %></p>
                    <p>Rarity: <%= card.rarity %></p>
                </div>

                <div> <%# --- ADD/WANT BUTTONS (Only show if logged in) --- %>
                    <% if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { %>
                        <%# Add to Collection Button %>
                        <form action="/collection/add/<%= card.id %>" method="POST" style="display: inline;">
                            <button type="submit" class="collection-button">Add to Collection</button>
                        </form>

                        <%# Add to Want List Button %>
                        <form action="/wantlist/add/<%= card.id %>" method="POST" style="display: inline;">
                            <button type="submit" class="want-button">Add to Want List</button>
                        </form>
                    <% } %>
                    <%# --- END ADD/WANT BUTTONS --- %>
                </div>
            </div>
        <% }); %>
    </div>
<% } else { %>
    <p>No cards found in the database.</p>
<% } %>

<%# --- Page Specific Content Ends Here --- %>

<%- include('partials/footer'); %> <%# Include the footer partial %>
